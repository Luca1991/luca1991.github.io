import{v as R,w as M,x as S,y as N,z as E,A as I,B as A,C as w,D as B,E as Y,F as x,G as F,H as C,I as U,J as y,K as H,L as $,M as z,N as p,O as G,P as Z,Q as k,g as m,R as q,T as J,U as K,V as Q,W as V,l as W,X,Y as j,Z as ee,S as te,_ as se,u as ae,i as ie,$ as re,a0 as ne}from"./CteMEIe_.js";class fe{anchor;#t=new Map;#s=new Map;#e=new Map;#a=new Set;#i=!0;constructor(e,s=!0){this.anchor=e,this.#i=s}#r=()=>{var e=R;if(this.#t.has(e)){var s=this.#t.get(e),t=this.#s.get(s);if(t)M(t),this.#a.delete(s);else{var n=this.#e.get(s);n&&(this.#s.set(s,n.effect),this.#e.delete(s),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),t=n.effect)}for(const[a,r]of this.#t){if(this.#t.delete(a),a===e)break;const i=this.#e.get(r);i&&(S(i.effect),this.#e.delete(r))}for(const[a,r]of this.#s){if(a===s||this.#a.has(a))continue;const i=()=>{if(Array.from(this.#t.values()).includes(a)){var h=document.createDocumentFragment();B(r,h),h.append(E()),this.#e.set(a,{effect:r,fragment:h})}else S(r);this.#a.delete(a),this.#s.delete(a)};this.#i||!t?(this.#a.add(a),N(r,i,!1)):i()}}};#n=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[t,n]of this.#e)s.includes(t)||(S(n.effect),this.#e.delete(t))};ensure(e,s){var t=R,n=Y();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(n){var a=document.createDocumentFragment(),r=E();a.append(r),this.#e.set(e,{effect:I(()=>s(r)),fragment:a})}else this.#s.set(e,I(()=>s(this.anchor)));if(this.#t.set(t,e),n){for(const[i,f]of this.#s)i===e?t.unskip_effect(f):t.skip_effect(f);for(const[i,f]of this.#e)i===e?t.unskip_effect(f.effect):t.skip_effect(f.effect);t.oncommit(this.#r),t.ondiscard(this.#n)}else A&&(this.anchor=w),this.#r()}}function he(c,e,s=!1){A&&F();var t=new fe(c),n=s?C:0;function a(r,i){if(A){const o=U(c);var f;if(o===y?f=0:o===H?f=!1:f=parseInt(o.substring(1)),r!==f){var h=$();z(h),t.anchor=h,p(!1),t.ensure(r,i),p(!0);return}}t.ensure(r,i)}x(()=>{var r=!1;e((i,f=0)=>{r=!0,a(f,i)}),r||a(!1,null)},n)}let b=!1;function ce(c){var e=b;try{return b=!1,[c(),b]}finally{b=e}}function oe(c,e,s,t){var n=!W||(s&X)!==0,a=(s&j)!==0,r=(s&ne)!==0,i=t,f=!0,h=()=>(f&&(f=!1,i=r?ae(t):t),i),o;if(a){var O=te in c||se in c;o=G(c,e)?.set??(O&&e in c?u=>c[e]=u:void 0)}var _,T=!1;a?[_,T]=ce(()=>c[e]):_=c[e],_===void 0&&t!==void 0&&(_=h(),o&&(n&&Z(),o(_)));var d;if(n?d=()=>{var u=c[e];return u===void 0?h():(f=!0,u)}:d=()=>{var u=c[e];return u!==void 0&&(i=void 0),u===void 0?i:u},n&&(s&k)===0)return d;if(o){var D=c.$$legacy;return(function(u,v){return arguments.length>0?((!n||!v||D||T)&&o(v?d():u),u):d()})}var g=!1,l=((s&re)!==0?ie:V)(()=>(g=!1,d()));a&&m(l);var L=K;return(function(u,v){if(arguments.length>0){const P=v?m(l):n&&a?q(u):u;return J(l,P),g=!0,i!==void 0&&(i=P),u}return ee&&g||(L.f&Q)!==0?l.v:m(l)})}export{fe as B,he as i,oe as p};
